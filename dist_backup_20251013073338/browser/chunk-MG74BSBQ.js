import{a as L}from"./chunk-YIV4SUKY.js";import{n as T}from"./chunk-Y3TZ4CJO.js";import{Ab as I,Db as S,Fa as n,Fb as E,Ga as o,Ha as c,Ia as u,Ka as f,L as v,La as d,Q as _,R as x,Ub as C,Xa as r,Ya as g,_a as y,ha as s,ma as M,ra as m,tb as O,ub as k,va as l,vb as w,xa as P}from"./chunk-MIUFO4FE.js";import{d as h}from"./chunk-DGAILPFQ.js";function A(e,i){e&1&&(n(0,"div",14)(1,"div",15),c(2,"i",16),o(),n(3,"p"),r(4,"Loading your posts..."),o()())}function N(e,i){if(e&1){let t=u();n(0,"div",17)(1,"div",18),c(2,"i",19),o(),n(3,"p"),r(4),o(),n(5,"button",20),f("click",function(){_(t);let p=d();return x(p.refreshPosts())}),r(6,"Try Again"),o()()}if(e&2){let t=d();s(4),g(t.error)}}function $(e,i){e&1&&(n(0,"div",21)(1,"div",22),c(2,"i",23),o(),n(3,"h3"),r(4,"No posts yet"),o(),n(5,"p"),r(6,"You haven't created any posts. Start sharing your thoughts!"),o(),n(7,"a",24),c(8,"i",25),r(9," Create Your First Post "),o()())}function F(e,i){if(e&1){let t=u();n(0,"button",47),f("click",function(p){_(t);let b=d().$implicit,V=d(2);return p.stopPropagation(),x(V.openPostInNewTab(b))}),c(1,"i",48),o()}}function D(e,i){if(e&1&&(n(0,"div",49),c(1,"i",50),n(2,"span"),r(3),o()()),e&2){let t=d().$implicit;s(3),y("",t.media.length," media file",t.media.length!==1?"s":"","")}}function R(e,i){if(e&1&&(n(0,"div",51),c(1,"i",52),n(2,"span"),r(3),o()()),e&2){let t=d().$implicit;s(3),g(t.likes_count)}}function j(e,i){if(e&1&&(n(0,"div",51),c(1,"i",53),n(2,"span"),r(3),o()()),e&2){let t=d().$implicit;s(3),g(t.reposts_count)}}function Y(e,i){if(e&1&&(n(0,"div",51),c(1,"i",54),n(2,"span"),r(3),o()()),e&2){let t=d().$implicit;s(3),g(t.replies_count)}}function U(e,i){e&1&&(n(0,"div",55),c(1,"i",48),n(2,"span"),r(3,"Click to view publicly"),o()())}function H(e,i){if(e&1){let t=u();n(0,"div",33),f("click",function(){let p=_(t).$implicit,b=d(2);return x(p.visibility==="public"?b.openPostInNewTab(p):null)}),n(1,"div",34)(2,"div",35)(3,"span",36),r(4),o(),n(5,"div",37),c(6,"i",38),n(7,"span"),r(8),o()()(),n(9,"div",39),m(10,F,2,0,"button",40),o()(),n(11,"div",41)(12,"div",42)(13,"p"),r(14),o()(),m(15,D,4,2,"div",43),o(),n(16,"div",44),m(17,R,4,1,"div",45)(18,j,4,1,"div",45)(19,Y,4,1,"div",45),o(),m(20,U,4,0,"div",46),o()}if(e&2){let t=i.$implicit,a=d(2);P("clickable",t.visibility==="public"),s(4),g(a.formatDate(t.published_at||t.created_at)),s(2),l("ngClass",a.getVisibilityIcon(t.visibility)),s(2),g(a.getVisibilityText(t.visibility)),s(2),l("ngIf",t.visibility==="public"),s(4),g(a.getPostPreview(t.content)),s(),l("ngIf",a.hasMedia(t)),s(2),l("ngIf",t.likes_count!==void 0),s(),l("ngIf",t.reposts_count!==void 0),s(),l("ngIf",t.replies_count!==void 0),s(),l("ngIf",t.visibility==="public")}}function q(e,i){e&1&&(n(0,"span"),r(1,"Load More Posts"),o())}function B(e,i){e&1&&(n(0,"span"),c(1,"i",16),r(2," Loading... "),o())}function G(e,i){if(e&1){let t=u();n(0,"div",56)(1,"button",57),f("click",function(){_(t);let p=d(2);return x(p.loadMorePosts())}),m(2,q,2,0,"span",58)(3,B,3,0,"span",58),o()()}if(e&2){let t=d(2);s(),l("disabled",t.isLoading),s(),l("ngIf",!t.isLoading),s(),l("ngIf",t.isLoading)}}function J(e,i){e&1&&(n(0,"div",59),c(1,"i",16),n(2,"span"),r(3,"Loading more posts..."),o()())}function K(e,i){if(e&1&&(n(0,"div",26)(1,"div",27)(2,"span",28),r(3),o()(),n(4,"div",29),m(5,H,21,12,"div",30),o(),m(6,G,4,3,"div",31)(7,J,4,0,"div",32),o()),e&2){let t=d();s(3),y("",t.totalPosts," post",t.totalPosts!==1?"s":""," total"),s(2),l("ngForOf",t.posts),s(),l("ngIf",t.hasMorePosts),s(),l("ngIf",t.isLoading&&t.posts.length>0)}}var z=class e{posts=[];isLoading=!1;error=null;currentPage=1;totalPosts=0;hasMorePosts=!1;http=v(E);authService=v(T);ngOnInit(){this.loadMyPosts()}loadMyPosts(i=1){return h(this,null,function*(){this.isLoading=!0,this.error=null;try{let t=this.authService.getToken();console.log("Auth token:",t?"Token exists":"No token found"),console.log("Token value:",t?t.substring(0,20)+"...":"No token"),console.log("Is authenticated:",this.authService.isAuthenticated()),console.log("API URL:",C.API_URL);let a=new S({"Content-Type":"application/json"});console.log("Request headers:",a.keys()),console.log("Let interceptor handle auth token automatically");let p=yield this.http.get(`${C.API_URL}/api/my-posts?page=${i}&per_page=20`,{headers:a}).toPromise();p&&p.success?(i===1?this.posts=p.data:this.posts=[...this.posts,...p.data],this.currentPage=p.pagination.current_page,this.totalPosts=p.pagination.total,this.hasMorePosts=this.currentPage<p.pagination.last_page):this.error=p?.message||"Failed to load posts"}catch(t){console.error("Error loading posts:",t),this.error="An error occurred while loading your posts"}finally{this.isLoading=!1}})}loadMorePosts(){!this.isLoading&&this.hasMorePosts&&this.loadMyPosts(this.currentPage+1)}openPostInNewTab(i){i.public_url&&window.open(i.public_url,"_blank")}getPostPreview(i){return i.length<=100?i:i.substring(0,100)+"..."}formatDate(i){return new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}getVisibilityIcon(i){switch(i){case"public":return"fa-globe";case"followers":return"fa-users";case"private":return"fa-lock";default:return"fa-question"}}getVisibilityText(i){switch(i){case"public":return"Public";case"followers":return"Followers";case"private":return"Private";default:return i}}hasMedia(i){return!!(i.media&&i.media.length>0)}refreshPosts(){this.currentPage=1,this.loadMyPosts(1)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=M({type:e,selectors:[["app-my-posts"]],decls:20,vars:7,consts:[[1,"pt-80","pb-80","px-lg-5"],[1,"container-fluid"],[1,"row"],[1,"col-lg-3"],[1,"col-lg-9"],[1,"account-body"],[1,"sec-title","mb-4"],[1,"posts-header"],[1,"refresh-btn",3,"click","disabled"],[1,"fa-solid","fa-refresh"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","posts-list",4,"ngIf"],[1,"loading-state"],[1,"spinner"],[1,"fa-solid","fa-spinner","fa-spin"],[1,"error-state"],[1,"error-icon"],[1,"fa-solid","fa-exclamation-triangle"],[1,"retry-btn",3,"click"],[1,"empty-state"],[1,"empty-icon"],[1,"fa-solid","fa-edit"],["href","/my-account/post",1,"create-post-btn"],[1,"fa-solid","fa-plus"],[1,"posts-list"],[1,"posts-summary"],[1,"posts-count"],[1,"posts-grid"],["class","post-card",3,"clickable","click",4,"ngFor","ngForOf"],["class","load-more-container",4,"ngIf"],["class","loading-more",4,"ngIf"],[1,"post-card",3,"click"],[1,"post-header"],[1,"post-meta"],[1,"post-date"],[1,"post-visibility"],[1,"fa-solid",3,"ngClass"],[1,"post-actions"],["class","external-link-btn","title","Open in new tab",3,"click",4,"ngIf"],[1,"post-content"],[1,"post-text"],["class","post-media-indicator",4,"ngIf"],[1,"post-stats"],["class","stat-item",4,"ngIf"],["class","public-indicator",4,"ngIf"],["title","Open in new tab",1,"external-link-btn",3,"click"],[1,"fa-solid","fa-external-link"],[1,"post-media-indicator"],[1,"fa-solid","fa-image"],[1,"stat-item"],[1,"fa-solid","fa-heart"],[1,"fa-solid","fa-retweet"],[1,"fa-solid","fa-reply"],[1,"public-indicator"],[1,"load-more-container"],[1,"load-more-btn",3,"click","disabled"],[4,"ngIf"],[1,"loading-more"]],template:function(t,a){t&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),c(4,"app-account-sidebar"),o(),n(5,"div",4)(6,"div",5)(7,"div",6)(8,"h2"),r(9,"My Posts"),o(),n(10,"p"),r(11,"View and manage all your posts"),o()(),n(12,"div",7)(13,"button",8),f("click",function(){return a.refreshPosts()}),c(14,"i",9),r(15," Refresh "),o()(),m(16,A,5,0,"div",10)(17,N,7,1,"div",11)(18,$,10,0,"div",12)(19,K,8,5,"div",13),o()()()()()),t&2&&(s(13),l("disabled",a.isLoading),s(),P("spinning",a.isLoading),s(2),l("ngIf",a.isLoading&&a.posts.length===0),s(),l("ngIf",a.error),s(),l("ngIf",!a.isLoading&&!a.error&&a.posts.length===0),s(),l("ngIf",!a.error&&a.posts.length>0))},dependencies:[I,O,k,w,L],styles:[".posts-header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;margin-bottom:30px}.refresh-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 16px;background:#007bff;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease}.refresh-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3;transform:translateY(-1px)}.refresh-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.spinner[_ngcontent-%COMP%]{font-size:32px;color:#007bff;margin-bottom:16px}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px}.error-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.error-icon[_ngcontent-%COMP%]{font-size:48px;color:#dc3545;margin-bottom:16px}.error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px;margin-bottom:20px}.retry-btn[_ngcontent-%COMP%]{padding:10px 20px;background:#dc3545;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500}.retry-btn[_ngcontent-%COMP%]:hover{background:#c82333}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px}.empty-icon[_ngcontent-%COMP%]{font-size:64px;color:#ccc;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#333;font-size:24px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px;margin-bottom:30px}.create-post-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;background:#28a745;color:#fff;text-decoration:none;border-radius:6px;font-size:16px;font-weight:500;transition:all .2s ease}.create-post-btn[_ngcontent-%COMP%]:hover{background:#218838;transform:translateY(-1px)}.posts-summary[_ngcontent-%COMP%]{margin-bottom:20px;padding:12px 0;border-bottom:1px solid #e9ecef}.posts-count[_ngcontent-%COMP%]{color:#666;font-size:14px;font-weight:500}.posts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px;margin-bottom:30px}.post-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e1e5e9;border-radius:12px;padding:20px;transition:all .2s ease;position:relative;display:flex;flex-direction:column}.post-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a;transform:translateY(-2px)}.post-card.clickable[_ngcontent-%COMP%]{cursor:pointer}.post-card.clickable[_ngcontent-%COMP%]:hover{border-color:#007bff}.post-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px}.post-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.post-date[_ngcontent-%COMP%]{color:#666;font-size:12px;font-weight:500}.post-visibility[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:12px;color:#007bff;background:#f0f8ff;padding:4px 8px;border-radius:12px}.post-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.external-link-btn[_ngcontent-%COMP%]{background:none;border:none;color:#007bff;cursor:pointer;padding:4px;border-radius:4px;font-size:14px;transition:all .2s ease}.external-link-btn[_ngcontent-%COMP%]:hover{background:#f0f8ff;color:#0056b3}.post-content[_ngcontent-%COMP%]{flex:1;margin-bottom:16px}.post-text[_ngcontent-%COMP%]{margin-bottom:12px}.post-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#333;font-size:14px;line-height:1.5}.post-media-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;color:#666;font-size:12px;background:#f8f9fa;padding:6px 10px;border-radius:6px;width:fit-content}.post-stats[_ngcontent-%COMP%]{display:flex;gap:16px;padding-top:12px;border-top:1px solid #f0f0f0;margin-bottom:12px}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:#666;font-size:12px}.stat-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:14px}.public-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;color:#28a745;font-size:11px;font-weight:500;background:#f8fff9;padding:6px 10px;border-radius:6px;border:1px solid #d4edda;margin-top:auto}.load-more-container[_ngcontent-%COMP%]{text-align:center;margin-top:30px}.load-more-btn[_ngcontent-%COMP%]{padding:12px 24px;background:#007bff;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease}.load-more-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.load-more-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.loading-more[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#666;font-size:14px}.loading-more[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}@media (max-width: 768px){.posts-header[_ngcontent-%COMP%]{justify-content:center;margin-bottom:20px}.posts-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.post-card[_ngcontent-%COMP%]{padding:16px}}@media (max-width: 480px){.post-header[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.post-meta[_ngcontent-%COMP%]{flex-direction:row;align-items:center;gap:12px}}"]})};export{z as MyPostsComponent};
