import{a as k}from"./chunk-PM267IJZ.js";import{a as E}from"./chunk-K5WROS2F.js";import{a as P}from"./chunk-GOVYMHQK.js";import{b as L,c as N,d as g,e as B,f as A,g as D,h as b,j as R,n as q,o as G,s as V,w as T}from"./chunk-GN67F3B6.js";import"./chunk-Y3VLPE36.js";import{c as M,l as I,n as O}from"./chunk-Y3TZ4CJO.js";import"./chunk-55YTS6XV.js";import{Fa as e,Ga as o,Ha as m,Ka as C,L as p,Oa as S,Pb as y,Qb as F,Xa as n,Ya as w,Za as s,a as f,ca as d,eb as x,fb as r,gb as a,ha as i,ma as h,tb as _,va as u}from"./chunk-MIUFO4FE.js";import"./chunk-DGAILPFQ.js";var j=c=>({"was-validated":c}),z=class c{router=p(y);authService=p(O);errorService=p(P);authStore=p(I);loginForm=new D({email:new b("",[g.required,g.email]),password:new b("",[g.required]),remember:new b(!1)});headerColor=d("#6970FF");breadcrumbColor=d("#FF8A90");isLoading=d(!1);submitted=d(!1);subs=new f;constructor(){this.authService.isAuthenticated()&&this.router.navigate(["/"]).then()}onSubmit(){if(this.submitted.set(!0),this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.submitted.set(!1),this.isLoading.set(!0);let v={email:this.loginForm.get("email")?.value?.trim(),password:this.loginForm.get("password")?.value};this.subs.add(this.authService.login(v).subscribe({next:t=>{t&&(localStorage.setItem("token",t?.data?.token),localStorage.setItem("user",JSON.stringify(t?.data?.user)),this.authStore.setSessionMethod(t?.data||null),this.router.navigate(["/"]).then())},error:t=>{this.errorService.showErrors(t),this.isLoading.set(!1)},complete:()=>{this.submitted.set(!1)}}))}ngOnDestroy(){this.subs.unsubscribe()}static \u0275fac=function(t){return new(t||c)};static \u0275cmp=h({type:c,selectors:[["app-login"]],decls:50,vars:31,consts:[[1,"container-fluid","login-content","p-3","p-lg-5"],[3,"title","bgColor","breadcrumbColor"],[1,"row","py-5"],[1,"col-12","col-md-6","d-none","d-lg-block","text-center"],["src","./images/login-register.png","alt","Register Banner",1,"user-select-none","custom-img"],[1,"col-12","col-md-6"],[1,"subtitle"],["novalidate","",1,"mt-4","needs-validation",3,"ngSubmit","formGroup","ngClass"],[1,"row"],[1,"col-12"],[1,"form-group","mb-4"],["for","login-email",1,"form-label"],["type","email","placeholder","","id","login-email","formControlName","email","required","",1,"form-control","main-input"],["for","login-password",1,"form-label"],["type","password","placeholder","","id","login-password","formControlName","password","required","",1,"form-control","main-input"],[1,"col-6"],[1,"remember"],[1,"form-check"],["type","checkbox","id","rememberMeCheckbox","formControlName","remember",1,"form-check-input"],["for","rememberMeCheckbox",1,"form-check-label"],[1,"col-6","text-end"],[1,"forgot-password"],["routerLink","/forgot-password"],[1,"col-lg-12"],[1,"form-group"],["type","submit",1,"btn","main-btn","rounded-pill","w-100",3,"disabled"],[1,"bottom-bar"],["routerLink","/register"]],template:function(t,l){t&1&&(m(0,"app-navbar"),e(1,"section",0),m(2,"app-breadcrumb",1),r(3,"translate"),e(4,"div",2)(5,"div",3),m(6,"img",4),o(),e(7,"div",5)(8,"div",6)(9,"h4"),n(10),r(11,"translate"),o()(),e(12,"form",7),C("ngSubmit",function(){return l.onSubmit()}),e(13,"div",8)(14,"div",9)(15,"div",10)(16,"label",11),n(17),r(18,"translate"),o(),m(19,"input",12),o()(),e(20,"div",9)(21,"div",10)(22,"label",13),n(23),r(24,"translate"),o(),m(25,"input",14),o()(),e(26,"div",15)(27,"div",10)(28,"div",16)(29,"div",17),m(30,"input",18),e(31,"label",19),n(32),r(33,"translate"),o()()()()(),e(34,"div",20)(35,"div",21)(36,"a",22),n(37,"Forgot password?"),o()()(),e(38,"div",23)(39,"div",24)(40,"button",25),n(41),r(42,"translate"),o()(),e(43,"div",26)(44,"p"),n(45),r(46,"translate"),e(47,"a",27),n(48),r(49,"translate"),o()()()()()()()()()),t&2&&(i(2),S("title",a(3,13,"login.title")),u("bgColor",l.headerColor())("breadcrumbColor",l.breadcrumbColor()),i(8),w(a(11,15,"login.title")),i(2),u("formGroup",l.loginForm)("ngClass",x(29,j,l.submitted()&&l.loginForm.touched&&l.loginForm.invalid)),i(5),s(" ",a(18,17,"login.email")," "),i(6),s(" ",a(24,19,"login.password")," "),i(9),s(" ",a(33,21,"login.remember_me")," "),i(8),u("disabled",l.isLoading()),i(),s(" ",a(42,23,"login.title")," "),i(4),s(" ",a(46,25,"login.not_registered")," "),i(3),s(" ",a(49,27,"login.create_account"),""))},dependencies:[k,E,M,T,R,N,L,B,A,V,q,G,_,F],styles:[".login-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--black-color);font-size:36px;font-weight:500}.custom-img[_ngcontent-%COMP%]{max-height:600px}.bottom-bar[_ngcontent-%COMP%]{padding:10px 0 0;text-align:center;position:relative}.bottom-bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#6970ff}@media (max-width: 576px){.login-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:24px}}"]})};export{z as LoginComponent};
